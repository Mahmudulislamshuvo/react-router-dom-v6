# রিয়্যাক্ট রাউটার টিউটোরিয়াল (React Router Tutorial)

**বিশেষ দ্রষ্টব্য:** এই প্রকল্পটি অফিশিয়াল রিয়্যাক্ট রাউটার টিউটোরিয়ালের উপর ভিত্তি করে তৈরি। মূল সোর্স এবং লাইভ উদাহরণের জন্য, অনুগ্রহ করে ভিজিট করুন: [React Router Tutorial](https://reactrouter.com/6.30.2/start/tutorial)।

---

স্বাগতম! আমরা একটি ছোট কিন্তু ফিচার-সমৃদ্ধ অ্যাপ তৈরি করব যা আপনার পরিচিতিদের (contacts) ট্র্যাক রাখতে সাহায্য করবে।

## সেটআপ (Setup)

আমরা এই টিউটোরিয়ালের জন্য আমাদের বান্ডলার এবং ডেভ সার্ভার হিসেবে Vite ব্যবহার করব। আপনার npm কমান্ড লাইন টুলের জন্য Node.js ইন্সটল করা থাকতে হবে।

আপনার টার্মিনাল ওপেন করুন এবং Vite এর মাধ্যমে একটি নতুন রিয়্যাক্ট অ্যাপ তৈরি করুন:

```bash
npm create vite@latest name-of-your-project -- --template react
# প্রম্পটগুলো অনুসরণ করুন
cd <your new project directory>
npm install react-router-dom # এটি সবসময় প্রয়োজন!
npm install localforage match-sorter sort-by # শুধুমাত্র এই টিউটোরিয়ালের জন্য
npm run dev
```

টার্মিনালে প্রিন্ট হওয়া URL টিতে ভিজিট করলে আপনি অ্যাপটি দেখতে পাবেন:

![Vite ডিফল্ট পেজ](<./public/02.webp>)

আমাদের `src/index.css` ফাইলে কিছু প্রি-রিটেন CSS যুক্ত করতে হবে যাতে আমরা রিয়্যাক্ট রাউটারে মনোযোগ দিতে পারি। এছাড়াও `src/contacts.js` ফাইলে কিছু ফেইক ডেটা মডিউল যোগ করতে হবে।

`src` ফোল্ডারে `contacts.js`, `main.jsx`, এবং `index.css` ছাড়া বাকি সব ফাইল মুছে ফেলুন।

## রাউটার যুক্ত করা (Adding a Router)

প্রথমেই আমাদের একটি ব্রাউজার রাউটার (Browser Router) তৈরি করতে হবে এবং আমাদের প্রথম রুট কনফিগার করতে হবে।

`main.jsx` ফাইলটি ওপেন করুন এবং রিয়্যাক্ট রাউটার যুক্ত করুন:

```jsx
import * as React from "react";
import * as ReactDOM from "react-dom/client";
import {
  createBrowserRouter,
  RouterProvider,
} from "react-router-dom";
import "./index.css";

const router = createBrowserRouter([
  {
    path: "/",
    element: <div>Hello world!</div>,
  },
]);

ReactDOM.createRoot(document.getElementById("root")).render(
  <React.StrictMode>
    <RouterProvider router={router} />
  </React.StrictMode>
);
```

## রুট রুট (The Root Route)

আসুন অ্যাপের গ্লোবাল লেআউট তৈরি করি। `src/routes` ফোল্ডার এবং `src/routes/root.jsx` ফাইল তৈরি করুন।

`root.jsx` ফাইলে সাইডবার এবং নেভিগেশন সহ লেআউটটি তৈরি করুন। এরপর `main.jsx` ফাইলে `<Root>` কে রুট রুটের এলিমেন্ট হিসেবে সেট করুন।

এখন অ্যাপটি দেখতে অনেকটা এরকম হবে:

![রুট লেআউট](<./public/03.webp>)

## নট ফাউন্ড এরর হ্যান্ডলিং (Handling Not Found Errors)

আমরা অ্যাপে কিছু লিঙ্ক যোগ করেছি, সেগুলোতে ক্লিক করলে কী হয় দেখা যাক। সাইডবারের যেকোনো একটি নামে ক্লিক করুন।

![ডিফল্ট এরর পেজ](<./public/04.webp>)

এটি রিয়্যাক্ট রাউটার এর ডিফল্ট এরর স্ক্রিন। আসুন আমরা আমাদের নিজস্ব এরর পেজ তৈরি করি।

`src/error-page.jsx` নামে একটি ফাইল তৈরি করুন এবং সেখানে এরর কম্পোনেন্টটি লিখুন। এরপর `main.jsx` এ `errorElement` হিসেবে এটি যুক্ত করুন।

```jsx
const router = createBrowserRouter([
  {
    path: "/",
    element: <Root />,
    errorElement: <ErrorPage />,
  },
]);
```

এখন এরর পেজটি দেখতে এমন হবে:

![কাস্টম এরর পেজ](<./public/05.webp>)

## কন্টাক্ট রুট ইউআই (The Contact Route UI)

লিঙ্কগুলোতে ক্লিক করলে 404 পেজের বদলে আমরা আসলে কিছু দেখাতে চাই। তার জন্য আমাদের একটি নতুন রুট তৈরি করতে হবে।

`src/routes/contact.jsx` ফাইল তৈরি করুন এবং সেখানে কন্টাক্ট কম্পোনেন্টের কোড লিখুন। এরপর `main.jsx` এ নতুন রুটটি ইমপোর্ট করুন।

```jsx
{
  path: "contacts/:contactId",
  element: <Contact />,
},
```

এখন `/contacts/1` এ গেলে আমরা নতুন কম্পোনেন্টটি দেখতে পাব, কিন্তু এটি আমাদের রুট লেআউটের ভেতরে নেই:

![প্যারেন্ট লেআউট ছাড়া কন্টাক্ট রুট](<./public/06.webp>)

## নেস্টেড রুটস (Nested Routes)

আমরা চাই কন্টাক্ট কম্পোনেন্টটি `<Root>` লেআউটের ভেতরে রেন্ডার হোক। এটি করার জন্য আমাদের কন্টাক্ট রুটটিকে রুট রুটের চাইল্ড (child) হিসেবে তৈরি করতে হবে।

```jsx
const router = createBrowserRouter([
  {
    path: "/",
    element: <Root />,
    errorElement: <ErrorPage />,
    children: [
      {
        path: "contacts/:contactId",
        element: <Contact />,
      },
    ],
  },
]);
```

এবং `root.jsx` ফাইলে যেখানে আমরা চাইল্ড রুট রেন্ডার করতে চাই সেখানে `<Outlet />` ব্যবহার করতে হবে।

এখন এটি দেখতে এমন হবে:

![নেস্টেড লেআউট](<./public/07.webp>)

## ডেটা লোডিং (Loading Data)

ইউআরএল সেগমেন্ট, লেআউট এবং ডেটা প্রায়শই একে অপরের সাথে সম্পর্কিত থাকে। রিয়্যাক্ট রাউটারে ডেটা লোড করার জন্য `loader` এবং `useLoaderData` ব্যবহার করা হয়।

`root.jsx` এ একটি লোডার ফাংশন এক্সপোর্ট করুন এবং রুটে সেটি কনফিগার করুন। তারপর `useLoaderData` হুক ব্যবহার করে ডেটা অ্যাক্সেস করুন।

এখনও আমাদের কোনো ডেটা নেই, তাই আপনি একটি খালি লিস্ট দেখতে পাবেন:

![খালি কন্টাক্ট লিস্ট](<./public/08.webp>)

## ডেটা রাইট এবং এইচটিএমএল ফর্ম (Data Writes + HTML Forms)

রিয়্যাক্ট রাউটার এইচটিএমএল ফর্ম নেভিগেশন অনুকরণ করে। যখন আমরা "New" বাটনে ক্লিক করি, অ্যাপটি এরর দিতে পারে কারণ Vite সার্ভার POST রিকোয়েস্ট হ্যান্ডল করার জন্য কনফিগার করা নেই।

![POST রিকোয়েস্ট এরর](<./public/09.webp>)

আমরা ক্লায়েন্ট সাইড রাউটিং ব্যবহার করে এটি সমাধান করব।

## কন্টাক্ট তৈরি করা (Creating Contacts)

আমরা `root.jsx` এ একটি `action` তৈরি করব এবং `<form>` কে রিয়্যাক্ট রাউটারের `<Form>` দিয়ে রিপ্লেস করব।

```jsx
export async function action() {
  const contact = await createContact();
  return { contact };
}
```

রুটে অ্যাকশনটি কনফিগার করার পর, "New" বাটনে ক্লিক করলে আপনি লিস্টে একটি নতুন রেকর্ড দেখতে পাবেন:

![নতুন রেকর্ড তৈরি](<./public/10.webp>)

## লোডারে ইউআরএল প্যারামস (URL Params in Loaders)

এখন লিস্টের "No Name" রেকর্ডে ক্লিক করুন। আমরা আবার সেই স্ট্যাটিক কন্টাক্ট পেজ দেখতে পাব।

URL এর `:contactId` অংশটি হলো "URL Params"। এটি লোডারে `params` হিসেবে পাস করা হয়।

`contact.jsx` এ একটি লোডার যোগ করুন যা আইডি দিয়ে কন্টাক্ট ফেচ করবে।

```jsx
export async function loader({ params }) {
  const contact = await getContact(params.contactId);
  return { contact };
}
```

এখন সঠিক ডেটা লোড হবে:

![সঠিক কন্টাক্ট ডেটা](<./public/11.webp>)

## ডেটা আপডেট করা (Updating Data)

ডেটা আপডেট করার জন্য আমরা `edit.jsx` নামে একটি নতুন রুট তৈরি করব।

`src/routes/edit.jsx` ফাইলে এডিট ফর্ম তৈরি করুন এবং `main.jsx` এ নতুন রুটটি যোগ করুন।

"Edit" বাটনে ক্লিক করলে আমরা এই নতুন ইউআই (UI) দেখতে পাব:

![এডিট ফর্ম](<./public/12.webp>)

## ফর্ম ডেটা দিয়ে কন্টাক্ট আপডেট (Updating Contacts with FormData)

এখন `edit.jsx` এ একটি অ্যাকশন যোগ করুন যা ফর্ম সাবমিট হ্যান্ডল করবে।

```jsx
export async function action({ request, params }) {
  const formData = await request.formData();
  const updates = Object.fromEntries(formData);
  await updateContact(params.contactId, updates);
  return redirect(`/contacts/${params.contactId}`);
}
```

ফর্ম পূরণ করে সেভ করলে আপনি আপডেট হওয়া কন্টাক্ট দেখতে পাবেন:

![আপডেট হওয়া কন্টাক্ট](<./public/13.webp>)

## রিডাইরেকশন (Redirecting new records)

এখন আমরা চাই নতুন কন্টাক্ট তৈরি হওয়ার পর সরাসরি এডিট পেজে চলে যেতে। `root.jsx` এর `createContact` অ্যাকশনে `redirect` ব্যবহার করুন।

এখন "New" ক্লিক করলে আমরা এডিট পেজে চলে আসব:

![এডিট পেজে রিডাইরেক্ট](<./public/14.webp>)

এখন কিছু নতুন রেকর্ড যোগ করুন:

![অনেকগুলো কন্টাক্ট](<./public/15.webp>)

## অ্যাক্টিভ লিঙ্ক স্টাইলিং (Active Link Styling)

সাইডবারে আমরা কোন কন্টাক্টটি দেখছি তা বোঝার জন্য `<NavLink>` ব্যবহার করতে পারি। এটি আমাদের `isActive` এবং `isPending` স্টেট দেয়।

এটি ব্যবহার করার পর সাইডবারে সিলেক্ট করা কন্টাক্টটি হাইলাইট হবে:

![অ্যাক্টিভ লিঙ্ক](<./public/16.webp>)

## গ্লোবাল পেন্ডিং ইউআই (Global Pending UI)

ডেটা লোড হওয়ার সময় ইউজারকে ফিডব্যাক দেওয়ার জন্য আমরা `useNavigation` হুক ব্যবহার করতে পারি। যখন অ্যাপটি "loading" স্টেটে থাকবে, তখন আমরা `root.jsx` এর ডিটেইল অংশে একটি ক্লাস যোগ করতে পারি যা ট্রানজিশন ইফেক্ট দিবে।

![লোডিং স্টেট](<./public/17.webp>)

## রেকর্ড ডিলিট করা (Deleting Records)

কন্টাক্ট ডিলিট করার জন্য আমাদের একটি `destroy.jsx` রুট এবং অ্যাকশন তৈরি করতে হবে।

`src/routes/destroy.jsx` তৈরি করুন এবং অ্যাকশন লিখুন যা `deleteContact` কল করবে। এরপর ফর্মে `action="destroy"` ব্যবহার করুন।

এখন "Delete" বাটনে ক্লিক করলে রেকর্ডটি মুছে যাবে!

![রেকর্ড ডিলিট](<./public/18.webp>)

## প্রাসঙ্গিক এরর (Contextual Errors)

যদি `destroy` অ্যাকশনে কোনো এরর হয়, তবে ডিফল্ট এরর পেজটি পুরো স্ক্রিন জুড়ে দেখা যাবে।

![এরর স্ক্রিন](<./public/19.webp>)

আমরা চাই এররটি শুধু কনটেন্ট এরিয়াতে দেখাক, যাতে সাইডবার ঠিক থাকে। এর জন্য `destroy` রুটে একটি `errorElement` যোগ করুন।

```jsx
{
  path: "contacts/:contactId/destroy",
  action: destroyAction,
  errorElement: <div>Oops! There was an error.</div>,
}
```

এখন এররটি এভাবে দেখাবে:

![কনটেক্সচুয়াল এরর](<./public/20.webp>)

## ইনডেক্স রুট (Index Routes)

অ্যাপ লোড করলে ডানপাশে একটি ফাঁকা জায়গা দেখা যায়।

![ফাঁকা পেজ](<./public/21.webp>)

এটি পূরণ করার জন্য আমরা একটি ইনডেক্স রুট ব্যবহার করতে পারি। `src/routes/index.jsx` তৈরি করুন এবং রুটে `{ index: true, element: <Index /> }` কনফিগার করুন।

এখন অ্যাপটি ওপেন করলে ডিফল্ট কন্টেন্ট দেখা যাবে:

![ইনডেক্স পেজ](<./public/22.webp>)

## সার্চ এবং GET সাবমিশন (URL Search Params and GET Submissions)

সার্চ বক্সে টাইপ করে এন্টার দিলে URL এ `?q=` যোগ হয়। আমরা ক্লায়েন্ট সাইড ফিল্টারিং করার জন্য সার্চ ফর্মে `<Form>` ব্যবহার করব এবং `root.jsx` এর লোডারে ফিল্টারিং লজিক বসাবো।

## ফর্ম স্টেটের সাথে URL সিঙ্ক করা

পেজ রিফ্রেশ করলে সার্চ ইনপুটের ভ্যালু হারিয়ে যায়। এটি ঠিক করার জন্য লোডার থেকে `q` রিটার্ন করুন এবং ইনপুটের `defaultValue` হিসেবে সেট করুন।

![সার্চ ইনপুট সিঙ্ক](<./public/23.webp>)

ব্যাক বাটনে ক্লিক করলে ইনপুট আপডেট করার জন্য `useEffect` ব্যবহার করতে হবে।

## টাইপ করার সাথে সাথে সাবমিট (Submitting Forms onChange)

`useSubmit` হুক ব্যবহার করে আমরা প্রতিবার কি-স্ট্রোকের সাথে ফর্ম সাবমিট করতে পারি। কিন্তু এতে হিস্ট্রি স্ট্যাক অনেক বড় হয়ে যায়।

![হিস্ট্রি স্ট্যাক](<./public/24.webp>)

এটি এড়াতে `submit` ফাংশনে `{ replace: !isFirstSearch }` অপশনটি ব্যবহার করুন।

## নেভিগেশন ছাড়া মিউটেশন (Mutations Without Navigation)

ফেভারিট (★) বাটনটি কাজ করানোর জন্য আমরা `useFetcher` ব্যবহার করব। এটি ইউআরএল পরিবর্তন না করেই লোডার এবং অ্যাকশনের সাথে যোগাযোগ করতে পারে।

`contact.jsx` এ ফেভারিট ফর্মটিকে `fetcher.Form` এ পরিবর্তন করুন এবং অ্যাকশন কনফিগার করুন।

এখন স্টার বাটনে ক্লিক করলে পেজ রিফ্রেশ বা নেভিগেশন ছাড়াই ডেটা আপডেট হবে:

![ফেভারিট বাটন](<./public/25.webp>)

## অপটিমিস্টিক ইউআই (Optimistic UI)

নেটওয়ার্ক স্লো থাকলে রেসপন্স আসতে দেরি হতে পারে। `fetcher.formData` ব্যবহার করে আমরা অ্যাকশন শেষ হওয়ার আগেই ইউআই আপডেট করে দিতে পারি। একে অপটিমিস্টিক ইউআই বলে।

## নট ফাউন্ড ডেটা (Not Found Data)

যদি এমন কোনো কন্টাক্ট লোড করার চেষ্টা করা হয় যা নেই, তবে আমরা একটি কাস্টম 404 এরর দেখাতে পারি। লোডারে `throw new Response` ব্যবহার করে এটি করা যায়।

![404 এরর](<./public/26.webp>)

## পাথলেস রুট (Pathless Routes)

আমরা চাই সব চাইল্ড রুটের এররগুলো রুট আউটলেটের ভেতরে রেন্ডার হোক। এর জন্য আমরা চাইল্ড রুটগুলোকে একটি পাথলেস রুটে (pathless route) র‍্যাপ করতে পারি।

```jsx
children: [
  {
    errorElement: <ErrorPage />,
    children: [ /* other routes */ ],
  },
],
```

এখন যেকোনো চাইল্ড রুটের এরর এভাবে দেখাবে:

![পাথলেস রুট এরর](<./public/27.webp>)

---

অভিনন্দন! আপনি সফলভাবে রিয়্যাক্ট রাউটার টিউটোরিয়ালটি সম্পন্ন করেছেন।
